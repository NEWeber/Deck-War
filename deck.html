<script>
  function Deck() {
    this.cards = [];
    this.count = function() {
      return this.cards.length;
    }
    this.init = function() {
      for (s = 1; s <=4; s++){
        for (r = 1; r <=13; r++) {
          this.cards.push(new Card(r, s));
        }
      }
    }
  }

  function Card(rank, suit) {
    this.rank = rank;
    this.suit = suit;
    //Sets up functions to put the numbered ranks and suits into terms players are familiar with.
    this.interpR = function(rank) {
      var ranks = ["Ace", 2, 3, 4, 5, 6, 7, 8, 9, 10, "Jack", "Queen", "King"];
      return ranks[(rank - 1)];
    }
    this.interpS = function(suit) {
      var suits = ["Spades", "Hearts", "Diamonds", "Clubs"];
      return suits[(suit - 1)];
    }
    this.show = function() {
    return this.interpR(this.rank) + " of " + this.interpS(this.suit) + ".";
    }
  }

  d = new Deck();
  d.init();
  var bigWar = function() {
    var playIt
    playIt = confirm("Welcome to the card game War. Do you want to play?");
    if (playIt) {
      alert("Great! Let's get started. Aces are high.");
      

      var littleWar = function() {
        alert("I'll draw my card, here's yours.");
        var myCardIndex;
        myCardIndex = (Math.floor(Math.random() * 52));
        var myCard = d.cards[myCardIndex];
        alert("You have the " + myCard.show());

        var compCardIndex = (Math.floor(Math.random() * 52));
        //Makes sure that the player and the computer don't end up with the same card
        while (compCardIndex === myCardIndex) {
          compCardIndex = (Math.floor(Math.random() * 52));
        }
        var compCard = d.cards[compCardIndex]
        alert("I have the " + compCard.show());
        

        //Set Ace rank to 14 so it beats all other cards
        if (myCard.rank == 1) {
          myCard.rank = 14;
        }

        if (compCard.rank == 1) {
          compCard.rank = 14;
        }

        if (compCard.rank > myCard.rank) {
          alert("I win!");
        }
        else if (compCard.rank < myCard.rank) {
          alert("I guess you win.");
        }
        //If tied, call the program recursively until there's a winner.
        else {
          alert("We're tied, put the card back, we'll do it again.");
          littleWar();
        }
      }
      
      littleWar();
    }

    else {
      alert("I wouldn't either. No hard feelings.");
    } 
  }
  bigWar();
</script>